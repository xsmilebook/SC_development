# 2026-01-27

## 修复：p-factor 交互曲线年龄范围异常（重复按月份缩放）

### 现象
- `development_script/6th_pfactor/run_abcd_pfactor_effect_continuous_S1.R` 的交互曲线图中年龄范围偏小（例如显示约 8–11 而不是预期的 9–13）。

### 根因（推断）
- 部分输入 SCdata 的 `age` 列可能已被转换为“年”，但在历史流程中又被再次按“月→年”缩放，导致 `age` 实际为 `years/12`。
- 脚本原有的 `age_to_years()` 仅能区分“月”(>24) 与“年”(<=24)，无法识别 `years/12` 的情况。

### 修复
- 在 `development_script/6th_pfactor/run_abcd_pfactor_effect_continuous_S1.R` 的 `age_to_years()` 中增加启发式检测：当 `max(age)<=2` 且乘以 12 后落在合理年龄范围内时，将 `age` 乘回 12。
- 另外，为避免旧版缓存导致修复不生效，脚本会自动检测 `plotdata_high90_low10_*_develop_*.rds` 缓存的年龄范围；若发现缓存 `age` 最大值 <=2 但当前数据 `age` 最大值 >5，则自动丢弃并重算缓存。
