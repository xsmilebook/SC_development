Bootstrap: docker
From: continuumio/miniconda3:23.11.0-1

%labels
  Author SCDevelopment
  Version 1.0
  Description CBCL association container with R 4.1.x via conda

%environment
  export PATH=/opt/conda/bin:$PATH
  export R_LIBS_USER=/opt/conda/lib/R/library
  export LC_ALL=C

%post
  /opt/conda/bin/conda config --add channels conda-forge
  /opt/conda/bin/conda config --set channel_priority strict
  /opt/conda/bin/conda install -y \
    r-base=4.1.3 \
    r-tidyverse \
    r-tidyr \
    r-reshape \
    r-rcolorbrewer \
    r-mgcv \
    r-nlme \
    r-matrix \
    r-lme4 \
    r-gamm4 \
    r-pbkrtest \
    r-r.matlab \
    r-r.methodss3 \
    r-r.oo \
    r-r.utils \
    r-psych \
    r-mnormt \
    r-gratia
  /opt/conda/bin/conda clean -a -y

%runscript
  exec /opt/conda/bin/R "$@"
